<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>reveal.js</title>

    <link rel="stylesheet" href="../../dist/reset.css" />
    <link rel="stylesheet" href="../../dist/reveal.css" />
    <link rel="stylesheet" href="../../dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../../plugin/highlight/monokai.css" />

</head>


<body>
    <div class="reveal">
        <div class="slides">
            <section data-background="#007acc">
                <h2>
                    Course Prerequisites
                </h2>
            </section>
            <section data-background="#007acc">
                <h4>
                    The Ecosystem
                </h4>
                <div style="display: flex;flex-direction: row;align-items: center;gap: 100px">
                    <img src="https://nodejs.org/static/images/logo.svg" height="128" />
                    <svg fill="none" height="128" viewBox="0 0 27 26" width="129" xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd"
                            d="m.98608 0h24.32332c.5446 0 .9861.436522.9861.975v24.05c0 .5385-.4415.975-.9861.975h-24.32332c-.544597 0-.98608-.4365-.98608-.975v-24.05c0-.538478.441483-.975.98608-.975zm13.63142 13.8324v-2.1324h-9.35841v2.1324h3.34111v9.4946h2.6598v-9.4946zm1.0604 9.2439c.4289.2162.9362.3784 1.5218.4865.5857.1081 1.2029.1622 1.8518.1622.6324 0 1.2331-.0595 1.8023-.1784.5691-.1189 1.0681-.3149 1.497-.5879s.7685-.6297 1.0187-1.0703.3753-.9852.3753-1.6339c0-.4703-.0715-.8824-.2145-1.2365-.1429-.3541-.3491-.669-.6186-.9447-.2694-.2757-.5925-.523-.9692-.7419s-.8014-.4257-1.2743-.6203c-.3465-.1406-.6572-.2771-.9321-.4095-.275-.1324-.5087-.2676-.7011-.4054-.1925-.1379-.3409-.2838-.4454-.4379-.1045-.154-.1567-.3284-.1567-.523 0-.1784.0467-.3392.1402-.4824.0935-.1433.2254-.2663.3959-.369s.3794-.1824.6269-.2392c.2474-.0567.5224-.0851.8248-.0851.22 0 .4523.0162.697.0486.2447.0325.4908.0825.7382.15.2475.0676.4881.1527.7218.2555.2337.1027.4495.2216.6475.3567v-2.4244c-.4015-.1514-.84-.2636-1.3157-.3365-.4756-.073-1.0214-.1095-1.6373-.1095-.6268 0-1.2207.0662-1.7816.1987-.5609.1324-1.0544.3392-1.4806.6203s-.763.6392-1.0104 1.0743c-.2475.4352-.3712.9555-.3712 1.5609 0 .7731.2268 1.4326.6805 1.9785.4537.546 1.1424 1.0082 2.0662 1.3866.363.146.7011.2892 1.0146.4298.3134.1405.5842.2865.8124.4378.2282.1514.4083.3162.5403.4946s.198.3811.198.6082c0 .1676-.0413.323-.1238.4662-.0825.1433-.2076.2676-.3753.373s-.3766.1879-.6268.2473c-.2502.0595-.5431.0892-.8785.0892-.5719 0-1.1383-.0986-1.6992-.2959-.5608-.1973-1.0805-.4933-1.5589-.8879z"
                            fill="#fff" fill-rule="evenodd"></path>
                    </svg>
                    <svg height="128" viewBox="0 0 780 250">
                        <path fill="#231F20"
                            d="M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z M480,0v200h100V50h50v150h50V50h50v150h50V0H480z M0,200h100V50h50v150h50V0H0V200z">
                        </path>
                    </svg>
                </div>
            </section>
            <section data-background="#007acc">
                <h2><img src="https://nodejs.org/static/images/logo.svg" height="128" /></h2>
                <p>Runtime for javascript on backend side<br /> (including tooling)</p>
                <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>
            </section>
            <section>
                <h2><svg fill="none" height="128" viewBox="0 0 27 26" width="129" xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd"
                            d="m.98608 0h24.32332c.5446 0 .9861.436522.9861.975v24.05c0 .5385-.4415.975-.9861.975h-24.32332c-.544597 0-.98608-.4365-.98608-.975v-24.05c0-.538478.441483-.975.98608-.975zm13.63142 13.8324v-2.1324h-9.35841v2.1324h3.34111v9.4946h2.6598v-9.4946zm1.0604 9.2439c.4289.2162.9362.3784 1.5218.4865.5857.1081 1.2029.1622 1.8518.1622.6324 0 1.2331-.0595 1.8023-.1784.5691-.1189 1.0681-.3149 1.497-.5879s.7685-.6297 1.0187-1.0703.3753-.9852.3753-1.6339c0-.4703-.0715-.8824-.2145-1.2365-.1429-.3541-.3491-.669-.6186-.9447-.2694-.2757-.5925-.523-.9692-.7419s-.8014-.4257-1.2743-.6203c-.3465-.1406-.6572-.2771-.9321-.4095-.275-.1324-.5087-.2676-.7011-.4054-.1925-.1379-.3409-.2838-.4454-.4379-.1045-.154-.1567-.3284-.1567-.523 0-.1784.0467-.3392.1402-.4824.0935-.1433.2254-.2663.3959-.369s.3794-.1824.6269-.2392c.2474-.0567.5224-.0851.8248-.0851.22 0 .4523.0162.697.0486.2447.0325.4908.0825.7382.15.2475.0676.4881.1527.7218.2555.2337.1027.4495.2216.6475.3567v-2.4244c-.4015-.1514-.84-.2636-1.3157-.3365-.4756-.073-1.0214-.1095-1.6373-.1095-.6268 0-1.2207.0662-1.7816.1987-.5609.1324-1.0544.3392-1.4806.6203s-.763.6392-1.0104 1.0743c-.2475.4352-.3712.9555-.3712 1.5609 0 .7731.2268 1.4326.6805 1.9785.4537.546 1.1424 1.0082 2.0662 1.3866.363.146.7011.2892 1.0146.4298.3134.1405.5842.2865.8124.4378.2282.1514.4083.3162.5403.4946s.198.3811.198.6082c0 .1676-.0413.323-.1238.4662-.0825.1433-.2076.2676-.3753.373s-.3766.1879-.6268.2473c-.2502.0595-.5431.0892-.8785.0892-.5719 0-1.1383-.0986-1.6992-.2959-.5608-.1973-1.0805-.4933-1.5589-.8879z"
                            fill="#fff" fill-rule="evenodd"></path>
                    </svg></h2>
                <p>
                    Javascript superset, a typesafe alternative.
                    <a href="https://www.typescriptlang.org/download">https://www.typescriptlang.org/download</a>
                </p>
            </section>
            <section>
                <h2><svg height="128" viewBox="0 0 780 250">
                        <path fill="#231F20"
                            d="M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z M480,0v200h100V50h50v150h50V50h50v150h50V0H480z M0,200h100V50h50v150h50V0H0V200z">
                        </path>
                    </svg></h2>
                <p>Package manager for nodejs ecosystem</p>
                <p style="font-style: italic;">Installed with nodejs</p>
            </section>
            <section>
                <h2>Initial project initialization</h2>
                <img src="../../assets/demo_teaser.png" />
            </section>
            <section>
                <h2>Decorators</h2>
                <p>Generally follows decoration pattern</p>
            </section>
            <section>
                <h2>Decoration Pattern</h2>
                <img height="400" src="../../assets/decoration-pattern.png" />
            </section>
            <section>
                <h2>Decoration Kurzgesagt</h2>
                <h4 style="font-style: italic;">(In a Nutshell)</h4>
                <ul>
                    <li>Give execution of a component to another entity</li>
                    <li>Another entity exutes additional code together with original one</li>
                </ul>
            </section>
            <section>
                <h2>Activating Decorators</h2>
                <pre><code class="language-bash">
"experimentalDecorators": true,
"emitDecoratorMetadata": true, 
                </code></pre>
                <small>In tsconfig.json</small>
            </section>
            <section>
                <h2>Decorators in Typescript (Angular)</h2>
                <pre><code class="language-typescript">
@Injectable()
class UsefulService {
}

@Injectable()
class NeedsService {
  constructor(public service: UsefulService) {}
}
                </code></pre>
            </section>
            <section>
                <h2>Decorators in Typescript (Inversify)</h2>
                <pre><code  class="language-typescript">
@injectable()
class Ninja implements Warrior {
    @inject(TYPES.Weapon) private _katana: Weapon;
    @inject(TYPES.ThrowableWeapon) private _shuriken: ThrowableWeapon;
    public fight() { return this._katana.hit(); }
    public sneak() { return this._shuriken.throw(); }
}
                </code></pre>
            </section>
            <section>
                <h2>Decorators Types</h2>
                <h4>(In Typescript)</h4>
                <ul>
                    <li>Class</li>
                    <li>Property</li>
                    <li>Accessor</li>
                    <li>Method</li>
                    <li>Patameter</li>
                </ul>
            </section>
            <section>
                <h3>Decorator vs. Decorator Factory</h3>
                <ul style="list-style: none;">
                    <li>Decorator - creates direct decorator</li>
                    <li>Factory - allows customization of decorators</li>
                </ul>
            </section>
            <section>
                <h2>Decorator Factory Example</h2>
                <pre><code class="language-typescript">
function color(value: string) {
    // this is the decorator factory, it sets up
    // the returned decorator function
    return function (target) {
        // this is the decorator
        // do something with 'target' and 'value'...
    };
}                    
                </code></pre>
                <small>from: <a
                        href="https://www.typescriptlang.org/docs/handbook/decorators.html">https://www.typescriptlang.org/docs/handbook/decorators.htm</a></small>
            </section>
            <section>
                <h2>Class Decorators (implementation)</h2>
                <pre><code class="language-typescript">
function ConstructorPerformance(Constructor: { new(...args: any[]): any }) {
    const start = new Date();
    return class extends Constructor {
        constructor(...args: any[]) {
            const start = new Date();
            super(args);
            const end = new Date();
            console.log(`took ${end.getTime() - start.getTime()}ms to finish construction`);
        }
    }
}
                </code></pre>
            </section>
            <section>
                <h2>Class Decorators (Usage)</h2>
                <pre><code class="language-typescript">
@ConstructorPerformance
class Test {
    constructor(){
        let result = 1
        for (let index = 1; index < 10000; index++) {
            result *= index;
        }
    }
}
const test = new Test();
                </code></pre>
                <pre><code class="language-bash">
took 12ms to finish construction
</code></pre>
            </section>
            <section>
                <h2>Method Decorator (implementation)</h2>
                <pre><code class="language-typescript">
function ExceptionWrapper(target: any, propertyKey: string, descriptor: TypedPropertyDescriptor<(...args: any[]) => void>) {
    const originalFunction  = target[propertyKey];
    descriptor.value = (...args: any[]) => {
        try{
            originalFunction.apply(target, ...args);
        } catch(error){
            const typedError = error as Error
            console.log(`caught exception in wrapper, ${typedError.message}`);
        }
    }

}
                </code></pre>
            </section>
            <section>
                <h2>Method Decorator (usage)</h2>
                <pre><code class="language-typescript">
export class Test {
    @ExceptionWrapper
    throwException(someValue: string) {
        throw new Error(someValue);
    }
}


const t = new Test();
console.log(t.throwException('some string'));
                </code></pre>
            </section>
            <section>
                <h2>Reflection and Metadata</h2>
                <h4>Let's look at the code</h4>
                <pre><code>
__decorate([
    ExceptionWrapper,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], Test.prototype, "throwException", null);
exports.Test = Test;
const t = new Test();
console.log(t.throwException('some string'));                    
                </code></pre>
                <small>Insufficient reflection</small>
            </section>
            <section>
                <h2>reflect-metadta to the rescue</h2>
                <ul>
                    <li><a href="https://www.npmjs.com/package/reflect-metadata">https://www.npmjs.com/package/reflect-metadata</a></li>
                    <li>~4M weekly downloads</li>
                    <li><a href="https://rbuckton.github.io/reflect-metadata/">Detaied Proposal</a></li>
                </ul>
            </section>
            <section>
                <h2>Reflection with reflect-metadata</h2>
                <pre><code>
import 'reflect-metadata';
function ConstructorPerformance(Constructor: { new(...args: any[]): any }) {
    const start = new Date();
    const metadataKeys = Reflect.getOwnMetadataKeys(Constructor); // ['design:paramtypes']
    const metadataPatamtypes = Reflect.getMetadata('design:paramtypes', Constructor);
    console.log(metadataPatamtypes.map((param:any) => param.name)); // [ 'String', 'Boolean' ]
    return class extends Constructor {
        constructor(...args: any[]) {
            const start = new Date();
            super(args);
            const end = new Date();
            console.log(`took ${end.getTime() - start.getTime()}ms to finish construction`);
        }
    }
}
                </code></pre>
            </section>
            <section>
                <h2>Wait... What about javascript?</h2>
                <p>Javascript decorators are at <a href="https://github.com/tc39/proposal-decorators">stage2</a> </p>
                <p>Which means: The committee expects the feature to be developed and eventually included in the
                    standard</p>
            </section>
            <section>
                <h2>DIY (decorators)</h2>
                <ul>
                    <li>Create an autologger decorator (method decorator)</li>
                    <li>Should log once in a beginning of a function</li>
                    <li>Should log all params with their values</li>
                </ul>
            </section>
            <section><h1>done!</h1></section>
        </div>
    </div>

    <script src="../../dist/reveal.js"></script>
    <script src="../../plugin/notes/notes.js"></script>
    <script src="../../plugin/markdown/markdown.js"></script>
    <script src="../../plugin/highlight/highlight.js"></script>
    <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
            hash: true,

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
        });
    </script>
</body>

</html>